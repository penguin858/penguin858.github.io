<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head>

    <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!--Description-->
    
        <meta name="description" content="Try">
    

    <!--Author-->
    
        <meta name="author" content="Xu Zeping">
    

    <!--Open Graph Title-->
    
        <meta property="og:title" content="Programming Language Exploration"/>
    

    <!--Open Graph Description-->
    
        <meta property="og:description" content="Try" />
    

    <!--Open Graph Site Name-->
    <meta property="og:site_name" content="Zeping&#39;s Home"/>

    <!--Type page-->
    
        <meta property="og:type" content="article" />
    

    <!--Page Cover-->
    

    <meta name="twitter:card" content="summary" />
    

    <!-- Title -->
    
    <title>Programming Language Exploration - Zeping&#39;s Home</title>

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.2/css/bootstrap.min.css" integrity="sha384-y3tfxAZXuh4HwSYylfB+J125MxIs6mR5FOHamPBG064zB+AFeWH94NdvaCBm8qnd" crossorigin="anonymous">

    <!-- Custom Fonts -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="//oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="//oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Gallery -->
    <link href="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.css" type="text/css" rel="stylesheet" />

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/style.css">

    <!-- Google Analytics --><!-- hexo-inject:begin --><!-- hexo-inject:end -->
    


</head>


<body>

<!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="bg-gradient"></div>
<div class="bg-pattern"></div>

<!-- Menu -->
<!--Menu Links and Overlay-->
<div class="menu-bg">
    <div class="menu-container">
        <ul>
            
            <li class="menu-item">
                <a href="/">
                    Home
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/archives">
                    Archives
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/about">
                    About
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/contact">
                    Contact
                </a>
            </li>
            
        </ul>
    </div>
</div>

<!--Hamburger Icon-->
<nav>
    <a href="#menu"></a>
</nav>

<div class="container">

    <!-- Main Content -->
    <div class="row">
    <div class="col-sm-12">

        <!--Title and Logo-->
        <header>
    <div class="logo">
        <a href="/"><i class="logo-icon fa fa-bolt" aria-hidden="true"></i></a>
        
    </div>
</header>

        <section class="main">
            
<div class="post">

    <div class="post-header">
        <h1 class="title">
            <a href="/2019/08/06/Programming-Language-Exploration/">
                Programming Language Exploration
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2019-08-06</span>
            
            <a href="#disqus_thread" class="comments">留言</a>
            
        </div>
    </div>

    <div class="content">

        <!-- Gallery -->
        

        <!-- Post Content -->
        <script src="/assets/js/APlayer.min.js"> </script><!-- toc -->
<ul>
<li><a href="#chapter-0-introduction">Chapter 0: Introduction</a><ul>
<li><a href="#1-indispensable-elements-of-programming-language">1. Indispensable elements of programming language</a></li>
<li><a href="#2-evaluating-programming-languages">2. Evaluating programming languages</a></li>
</ul>
</li>
<li><a href="#chapter-1-javascript">Chapter 1 JavaScript</a><ul>
<li><a href="#1background">1.Background</a></li>
<li><a href="#2hello-js">2.Hello JS</a></li>
<li><a href="#3-the-basics">3. The Basics</a></li>
<li><a href="#4-closures">4. Closures</a></li>
<li><a href="#5-methods">5. Methods</a></li>
<li><a href="#6-prototype">6. Prototype</a></li>
<li><a href="#7-scope">7. Scope</a></li>
<li><a href="#8-callback-and-promises">8. Callback and promises</a></li>
<li><a href="#9-exercise">9. Exercise</a></li>
</ul>
</li>
<li><a href="#chapter-2-coffeescript">Chapter 2 CoffeeScript</a><ul>
<li><a href="#1-background">1. Background</a></li>
<li><a href="#2-hello-coffeescript">2. Hello, CoffeeScript</a></li>
<li><a href="#3-the-basics">3. The basics</a></li>
</ul>
</li>
</ul>
<!-- tocstop -->
<a id="more"></a>
<h2 id="chapter-0-introduction"><a href="#Chapter-0-Introduction" class="headerlink" title="Chapter 0: Introduction"></a>Chapter 0: Introduction</h2><h3 id="1-indispensable-elements-of-programming-language"><a href="#1-Indispensable-elements-of-programming-language" class="headerlink" title="1. Indispensable elements of programming language"></a>1. Indispensable elements of programming language</h3><ul>
<li>Value: a unit of data</li>
<li>Literal: a representation of a value</li>
<li>Variable: a name that refers to a value</li>
<li>Expression: a combination of literals, variables and operators that is evaluated to produce a value</li>
<li>routine: a unit of code. Some languages called <em>function</em> .</li>
<li>Type: determines a collection of values with some prescribed behaviors.</li>
<li>statement: code that performs an action. <br> Types of statements : <br> 1. declaration statement. <br> 2. expression statement <br> 3. assignment statement <br> 4. invocation statement <br> 5. conditional statement <br> 6. iteration statement <br> 7. disruptive statement</li>
</ul>
<h3 id="2-evaluating-programming-languages"><a href="#2-Evaluating-programming-languages" class="headerlink" title="2. Evaluating programming languages"></a>2. Evaluating programming languages</h3><ul>
<li>Readability</li>
<li>Writability</li>
<li>Expressiveness </li>
<li>Guidance</li>
<li>Efficient compilation , efficient execution, or both.</li>
</ul>
<h2 id="chapter-1-javascript"><a href="#Chapter-1-JavaScript" class="headerlink" title="Chapter 1 JavaScript"></a>Chapter 1 JavaScript</h2><h3 id="1background"><a href="#1-Background" class="headerlink" title="1.Background"></a>1.Background</h3><p>1.&emsp;Strongly influenced by C: </p>
<ul>
<li>curly braces</li>
<li>assignment statement</li>
<li>if, while, for</li>
</ul>
<p>2.&emsp;But JavaScript and C are worlds apart.</p>
<ul>
<li>Function are first-class values: they can be assigned to variables, passed to functions, and returned from functions.</li>
</ul>
<p>3.&emsp;features</p>
<ul>
<li>Weak Typing</li>
<li>Automatic semicolon insertion</li>
</ul>
<h3 id="2hello-js"><a href="#2-Hello-JS" class="headerlink" title="2.Hello JS"></a>2.Hello JS</h3><p>1.&emsp;First programme:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span>(<span class="keyword">let</span> c = <span class="number">1</span>; c &lt;= <span class="number">40</span>; c++)&#123;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> b = <span class="number">1</span>; b &lt; c; b++)&#123;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">let</span> a = <span class="number">1</span>; a &lt; b; a++)&#123;</div><div class="line">            <span class="keyword">if</span>(a * a + b * b === c * c)&#123;</div><div class="line">            	<span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;a&#125;</span>, <span class="subst">$&#123;b&#125;</span>, <span class="subst">$&#123;c&#125;</span>`</span>);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>Note</strong>: In JavaScript, <code>x === y</code> is true iff x and y have the same value and the same type. <code>x == y</code> is true when the two objects are <em>similar</em> to, rather than equal to, each other(And sometimes behaves unexpectedly).</p>
<p><strong>Note</strong>: <code>${e}</code> interpolates the value of expression e into the string.</p>
<p>2.&emsp;Second programme: </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">generatePermutations</span>(<span class="params">a,n</span>)</span>&#123;</div><div class="line">        <span class="keyword">if</span>(n == <span class="number">0</span>)&#123;</div><div class="line">                <span class="built_in">console</span>.log(a.join(<span class="string">''</span>));</div><div class="line">        &#125; <span class="keyword">else</span>&#123;</div><div class="line">                <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span> ; i &lt; n ; i++)&#123;</div><div class="line">                        generatePermutations(a, n<span class="number">-1</span>);</div><div class="line">                        <span class="keyword">const</span> j = n % <span class="number">2</span> === <span class="number">0</span> ? <span class="number">0</span> : i;</div><div class="line">                        [a[j],a[n]] = [a[n], a[j]];</div><div class="line">                &#125;</div><div class="line">                generatePermutations(a, n<span class="number">-1</span>);</div><div class="line">        &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">if</span>(process.argv.length !== <span class="number">3</span>)&#123;</div><div class="line">        <span class="built_in">console</span>.error(<span class="string">'Exactly one argument is required'</span>);</div><div class="line">        process.exit(<span class="number">1</span>);</div><div class="line">&#125;</div><div class="line"><span class="keyword">const</span> word = process.argv[<span class="number">2</span>];</div><div class="line">generatePermutations(word.split(<span class="string">''</span>), word.length - <span class="number">1</span>);</div></pre></td></tr></table></figure>
<p>Output:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">$ node --use-strict anagram.js rat</div><div class="line">rat</div><div class="line">art</div><div class="line">tra</div><div class="line">rta</div><div class="line">atr</div><div class="line">tar</div></pre></td></tr></table></figure></p>
<p><strong>Note</strong>: This is an example of how to access the command line. JavaScript does not define the way, so the user have to choose a specific implementation. This is an example using Node.js.<br>Node’s built-in variable <code>process.argv</code> contains the command line tokens invoking our script(excluding options).<br>In this case, <code>process.argv === [&#39;node&#39;, &#39;anagrams.js&#39;, &#39;rat&#39;]</code>.</p>
<p><strong>Note</strong>: This algorithm is called <em>Heap’s algorithm</em>, which can generate all permutations of n objects.</p>
<p><strong>Note</strong>: JavaScript strings are <em>immutable</em> : you cannot make any changes. So in this programme, we <code>split</code> the string into an array of its characters, as array is mutable. Then use <code>join</code> to get a new string for output.</p>
<p>3.&emsp;Third programme:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> readline = <span class="built_in">require</span>(<span class="string">'readline'</span>);</div><div class="line"><span class="keyword">const</span> reader = readline.createInterface(process.stdin, <span class="literal">null</span>);</div><div class="line"><span class="keyword">const</span> counts = <span class="keyword">new</span> <span class="built_in">Map</span>();</div><div class="line"></div><div class="line">reader.on(<span class="string">'line'</span>, line =&gt; &#123;</div><div class="line">        <span class="keyword">for</span>( <span class="keyword">let</span> word <span class="keyword">of</span> line.toLowerCase().match(<span class="regexp">/[a-z']+/g</span>) || [])&#123;</div><div class="line">                counts.set(word, (counts.get(word) || <span class="number">0</span>) + <span class="number">1</span>);</div><div class="line">        &#125;</div><div class="line">&#125;).on(<span class="string">'close'</span>, () =&gt; &#123;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">let</span> word <span class="keyword">of</span> <span class="built_in">Array</span>.from(counts.keys()).sort())&#123;</div><div class="line">                <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;word&#125;</span> <span class="subst">$&#123;counts.get(word)&#125;</span>`</span>);</div><div class="line">        &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>Output is too long to show here.<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ node --use-strict wordcount.js &lt; 171025_03.txt</div></pre></td></tr></table></figure></p>
<p><strong>Note</strong>: This example uses Node’s built-in <code>readline</code> module. The script will write out each word and its count in sorted order.</p>
<h3 id="3-the-basics"><a href="#3-The-Basics" class="headerlink" title="3. The Basics"></a>3. The Basics</h3><p><strong>Note</strong>: A JavaScript program is made up of scripts and modules, each containing a sequence of statements and function declarations.</p>
<p><strong>Note</strong>: The value in JavaScript have one of exactly 7 types:</p>
<ul>
<li>undefined</li>
<li>null</li>
<li><strong>Boolean</strong>, including true and false</li>
<li><strong>Number</strong>, the type of all numbers, including numbers, Infinity, -Infinity, NaN(Not a Number)</li>
<li><strong>String</strong>: UTF-16.</li>
<li><strong>Symbol</strong></li>
<li><strong>Object</strong></li>
</ul>
<p>The first six types are <strong>primitive types</strong>; Object is a <strong>reference type</strong>.<br>Values of a primitive type are written directly inside the variable boxes, but object values are actually <strong>references</strong> to entities holding the object properties. This is an example.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">a = &#123;<span class="attr">x</span>:<span class="number">3</span>, <span class="attr">y</span> : <span class="number">5</span>&#125;</div><div class="line">&gt; &#123;<span class="attr">x</span>: <span class="number">3</span>, <span class="attr">y</span>: <span class="number">5</span>&#125;</div><div class="line">b = a</div><div class="line">&gt; &#123;<span class="attr">x</span>: <span class="number">3</span>, <span class="attr">y</span>: <span class="number">5</span>&#125;</div><div class="line">b.x = <span class="number">5</span></div><div class="line">&gt; <span class="number">5</span></div><div class="line">a</div><div class="line">&gt; &#123;<span class="attr">x</span>: <span class="number">5</span>, <span class="attr">y</span>: <span class="number">5</span>&#125;</div></pre></td></tr></table></figure>
<p>If you want to copy an object, iterate through the properties of an object and assign their values to properties in the copy. For array, it provides <code>slice</code> method to do that.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">a = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</div><div class="line">&gt; (<span class="number">3</span>) [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</div><div class="line">b = a.slice()</div><div class="line">&gt; (<span class="number">3</span>) [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</div><div class="line">a[<span class="number">0</span>] = <span class="number">2</span></div><div class="line">&gt; <span class="number">2</span></div><div class="line">b</div><div class="line">&gt; (<span class="number">3</span>) [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</div></pre></td></tr></table></figure>
<p><strong>Note</strong>: JavaScript is a <strong>weakly-typed language</strong>. When programs need some specific type of value:</p>
<ul>
<li>Boolean: 0, null, undefined, false, NaN and the empty string act as false. Other value act as true.</li>
<li>String: undefined acts as “undefined”, null acts as “null”, false acts as “false”, 3 acts as “3”, and so on. In fact, to use an object x in a string context, JavaScript evaluates x.toString().</li>
<li>Number: undefined acts as NaN, null as 0, false as 0, true as 1, and strings act as the number they “look like” or NaN. In fact, to use an object x in a number context, JavaScript evaluates x.valueOf().</li>
</ul>
<p><strong>Note</strong>: JavaScript gives us a few options for specifying function values, including the arrow(=&gt;), the construct <em>function (params) {body}</em>, and the function declaration. Function can be called by the name, the variable to which the function value was assigned, or even <strong>anonymously</strong>. Functions that accept functions as parameters or return functions are called <strong>higher-order functions</strong>. Higher-order functions facilitate a style of coding — called <strong>functional programming</strong> — in which function composition replaces assignment statements and explicit loops.</p>
<p>Example:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> assert = <span class="built_in">require</span>(<span class="string">'assert'</span>);</div><div class="line">  </div><div class="line"><span class="comment">// Function values can use '=&gt;' or 'function'</span></div><div class="line"><span class="keyword">const</span> square = <span class="function"><span class="params">x</span> =&gt;</span> x * x;</div><div class="line"><span class="keyword">const</span> odd = <span class="function"><span class="params">x</span> =&gt;</span> <span class="built_in">Math</span>.abs(x % <span class="number">2</span>) === <span class="number">1</span>;</div><div class="line"><span class="keyword">const</span> lessThanTen = <span class="function"><span class="keyword">function</span>(<span class="params">x</span>) </span>&#123;<span class="keyword">return</span> x &lt; <span class="number">10</span>&#125;;</div><div class="line"><span class="keyword">const</span> twice = <span class="function">(<span class="params">f,x</span>) =&gt;</span> f(f(x));</div><div class="line"></div><div class="line"><span class="comment">// An anonymous function call</span></div><div class="line">assert((<span class="function"><span class="params">x</span> =&gt;</span> x + <span class="number">5</span>)(<span class="number">10</span>) === (<span class="number">15</span>));</div><div class="line"></div><div class="line"><span class="comment">// We can pass function values to other functions</span></div><div class="line">assert(twice(square, <span class="number">-3</span>) === <span class="number">81</span>);</div><div class="line">assert(twice(<span class="function"><span class="params">x</span> =&gt;</span> x + <span class="number">1</span>, <span class="number">5</span>) === <span class="number">7</span>);</div><div class="line"></div><div class="line"><span class="comment">// We can create and return new functions on the fly</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">compose</span>(<span class="params">f,g</span>)</span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="function"><span class="params">x</span> =&gt;</span> f(g(x));</div><div class="line">&#125;</div><div class="line"><span class="keyword">const</span> isOddWhenSquared = compose(odd, square);</div><div class="line">assert(isOddWhenSquared(<span class="number">7</span>));</div><div class="line">assert(!isOddWhenSquared(<span class="number">0</span>));</div><div class="line"></div><div class="line"><span class="comment">// Array functions often take the place of loops</span></div><div class="line"><span class="keyword">const</span> a = [<span class="number">9</span>,<span class="number">7</span>,<span class="number">4</span>,<span class="number">-1</span>,<span class="number">8</span>];</div><div class="line">assert(!a.every(odd));</div><div class="line">assert(a.some(odd));</div><div class="line">assert(a.every(lessThanTen));</div><div class="line">assert.deepStrictEqual(a.filter(odd), [<span class="number">9</span>, <span class="number">7</span>, <span class="number">-1</span>]);</div><div class="line">assert.deepStrictEqual(a.map(square), [<span class="number">81</span>, <span class="number">49</span>, <span class="number">16</span>, <span class="number">1</span>, <span class="number">64</span>]);</div></pre></td></tr></table></figure>
<p><strong>Note</strong>: In JavaScript, arguments are fully evaluated before the call and their values are assigned(copied) to the parameters <em>left-to-right</em> . If you pass too many arguments, the extras will be ignored; pass too few and the extra parameters begin as undefined. you can mark your final parameters with … to pack extra arguments into an array, and can also use … on the argument side to unpack an array to pass into multiple parameters.</p>
<p><strong>Note</strong>: Each function call allocates a <strong>frame</strong>, or <strong>activation record</strong>, to hold parameters and <strong>local variables</strong> for this call.</p>
<h3 id="4-closures"><a href="#4-Closures" class="headerlink" title="4. Closures"></a>4. Closures</h3><p><strong>Note</strong>: Variables used but not declared inside the function are called <strong>free variables.</strong>. There are some definitions about the ways to deal with them:</p>
<ul>
<li><strong>Dynamically scoped</strong>: Languages that use caller’s values for free variables.</li>
<li><strong>Statically scoped</strong>: Languages that look outward to textually enclosing regions.</li>
<li><strong>Shallow binding</strong>: System binds the free variables of a passed function after passing.</li>
<li><strong>Deep binding</strong>: System binds the free variables where the function is defined.</li>
</ul>
<p>JavaScript is statically scoped and deep binding.</p>
<p>Example:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">second</span>(<span class="params">f</span>)</span>&#123;</div><div class="line">        <span class="keyword">const</span> name = <span class="string">'new'</span>;</div><div class="line">        f();</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">first</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        <span class="keyword">const</span> name = <span class="string">'old'</span>;</div><div class="line">        <span class="keyword">const</span> printName = <span class="function"><span class="params">()</span> =&gt;</span> <span class="built_in">console</span>.log(name);</div><div class="line">        second(printName);</div><div class="line">&#125;</div><div class="line"></div><div class="line">first();</div></pre></td></tr></table></figure>
<p>Output:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ node tryBinding.js </div><div class="line">old</div></pre></td></tr></table></figure>
<p><strong>Note</strong>: Closures can be used to make generators. If we use a global variable then returns its square would be insecure because other parts of the code could change the global variable.</p>
<p>Example:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> nextSquare = <span class="function">(<span class="params">(</span>) =&gt;</span> &#123;</div><div class="line">        <span class="keyword">let</span> previous = <span class="number">-1</span>;</div><div class="line">        <span class="keyword">return</span> <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">                previous++;</div><div class="line">                <span class="keyword">return</span> previous * previous;</div><div class="line">        &#125;</div><div class="line">&#125;)();</div><div class="line"></div><div class="line"><span class="keyword">const</span> assert = <span class="built_in">require</span>(<span class="string">'assert'</span>);</div><div class="line">assert(nextSquare() === <span class="number">0</span>);</div><div class="line">assert(nextSquare() === <span class="number">1</span>);</div><div class="line">assert(nextSquare() === <span class="number">4</span>);</div></pre></td></tr></table></figure>
<p>It can be changed like this style:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> nextSquare = <span class="function">(<span class="params">(previous</span>) =&gt;</span> &#123;</div><div class="line">    <span class="keyword">return</span> <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">        previous++;</div><div class="line">        <span class="keyword">return</span> previous * previous;</div><div class="line">    &#125;</div><div class="line">&#125;)(<span class="number">-1</span>);</div><div class="line"></div><div class="line"><span class="keyword">const</span> assert = <span class="built_in">require</span>(<span class="string">'assert'</span>);</div><div class="line">assert(nextSquare() === <span class="number">0</span>);</div><div class="line">assert(nextSquare() === <span class="number">1</span>);</div><div class="line">assert(nextSquare() === <span class="number">4</span>);</div></pre></td></tr></table></figure>
<h3 id="5-methods"><a href="#5-Methods" class="headerlink" title="5. Methods"></a>5. Methods</h3><p><strong>Note</strong>: When we call a function by property access notation, we sya the function is a <strong>method</strong> and the <strong>object</strong> is the receiver.</p>
<p><strong>Note</strong>: In JavaScript, if we define the method value with the <code>function (params) {body}</code> syntax, the special expression <code>this</code> refers to the receiver. Function defined with <code>(param) =&gt; {body}</code> do not get a special <code>this</code>. There is a shorthand notation of the <code>function</code> syntax:<br>Besides, we should note that <code>this</code> takes in the value of the method’s receiver as <strong>determined at runtime</strong>. This <strong>late binding</strong> can be quite flexible.</p>
<p>Example:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">circleExpand</span>(<span class="params">scale</span>)</span>&#123;</div><div class="line">	<span class="keyword">this</span>.radius *= scale;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> circle = &#123;</div><div class="line">	<span class="attr">radius</span>: <span class="number">10</span>,</div><div class="line">	<span class="attr">area</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;<span class="keyword">return</span> <span class="built_in">Math</span>.PI * <span class="keyword">this</span>.radius * <span class="keyword">this</span>.radius&#125;,</div><div class="line">	circumference() &#123;<span class="keyword">return</span> <span class="number">2</span> * <span class="built_in">Math</span>.PI * <span class="keyword">this</span>.radius&#125;,</div><div class="line">	<span class="attr">expand</span>: circleExpand</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(circle.area());</div><div class="line"><span class="built_in">console</span>.log(circle.circumference());</div><div class="line">circle.expand(<span class="number">2</span>);</div><div class="line"><span class="built_in">console</span>.log(circle.area());</div></pre></td></tr></table></figure>
<p>Output:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">$ node circle1.js </div><div class="line">314.1592653589793</div><div class="line">62.83185307179586</div><div class="line">1256.6370614359173</div></pre></td></tr></table></figure>
<h3 id="6-prototype"><a href="#6-Prototype" class="headerlink" title="6. Prototype"></a>6. Prototype</h3><p><strong>Note</strong>: If we need to create some similar objects, we need to start from an initial object, which is called <em>Prototype</em> . The newly created objects, we store only those properties whose values differ from those in the prototypal circle.</p>
<p>Example:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> unitCircle = &#123;</div><div class="line">    <span class="attr">x</span>: <span class="number">0</span>,</div><div class="line">    <span class="attr">y</span>: <span class="number">0</span>,</div><div class="line">    <span class="attr">radius</span>: <span class="number">1</span>,</div><div class="line">    <span class="attr">color</span>: <span class="string">"black"</span>,</div><div class="line">    area() &#123;<span class="keyword">return</span> <span class="built_in">Math</span>.PI * <span class="keyword">this</span>.radius * <span class="keyword">this</span>.radius&#125;,</div><div class="line">    circumference() &#123;<span class="keyword">return</span> <span class="number">2</span> * <span class="built_in">Math</span>.PI * <span class="keyword">this</span>.radius&#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="keyword">const</span> c1 = <span class="built_in">Object</span>.create(unitCircle);</div><div class="line">c1.x = <span class="number">3</span>;</div><div class="line">c1.color = <span class="string">'green'</span>;</div><div class="line"></div><div class="line"><span class="keyword">const</span> c2 = <span class="built_in">Object</span>.create(unitCircle);</div><div class="line">c2.radius = <span class="number">5</span>;</div><div class="line"></div><div class="line"><span class="keyword">const</span> c3 = <span class="built_in">Object</span>.create(unitCircle);</div><div class="line"></div><div class="line"><span class="keyword">const</span> assert = <span class="built_in">require</span>(<span class="string">'assert'</span>);</div><div class="line">assert(c2.color === <span class="string">"black"</span> &amp;&amp; c2.area() === <span class="number">25</span> * <span class="built_in">Math</span>.PI);</div><div class="line">assert(c3.y === <span class="number">0</span> &amp;&amp; c3.area() === <span class="built_in">Math</span>.PI);</div></pre></td></tr></table></figure>
<p><strong>Note</strong>: JavaScript provides a way to construct each instance of a family of objects that each share a prototype.</p>
<p>Each function in JavaScript has two properties: <code>length</code> and <code>prototype</code>. Actually <code>Object</code> has these properties. There is the definition of <code>Object</code>(the version in vscode):</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">interface</span> Object &#123;</div><div class="line">    <span class="comment">/** The initial value of Object.prototype.constructor is the standard built-in Object constructor. */</span></div><div class="line">    <span class="keyword">constructor</span>: Function;</div><div class="line"></div><div class="line">    /** Returns a string representation of an object. */</div><div class="line">    toString(<span class="params"></span>): string;</div><div class="line"></div><div class="line">    /** Returns a date converted to a string using the current locale. */</div><div class="line">    toLocaleString(<span class="params"></span>): string;</div><div class="line"></div><div class="line">    /** Returns the primitive value of the specified object. */</div><div class="line">    valueOf(<span class="params"></span>): Object;</div><div class="line"></div><div class="line">    /**</div><div class="line">      * Determines whether an object has a property with the specified name.</div><div class="line">      * @param v A property name.</div><div class="line">      */</div><div class="line">    hasOwnProperty(<span class="params">v: PropertyKey</span>): boolean;</div><div class="line"></div><div class="line">    /**</div><div class="line">      * Determines whether an object exists in another object's prototype chain.</div><div class="line">      * @param v Another object whose prototype chain is to be checked.</div><div class="line">      */</div><div class="line">    isPrototypeOf(<span class="params">v: <span class="built_in">Object</span></span>): boolean;</div><div class="line"></div><div class="line">    /**</div><div class="line">      * Determines whether a specified property is enumerable.</div><div class="line">      * @param v A property name.</div><div class="line">      */</div><div class="line">    propertyIsEnumerable(<span class="params">v: PropertyKey</span>): boolean;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>We can create an object by calling the function with the operator <code>new</code>. The <code>constructor</code> property will store the function.<br>We can give the object properties and methods through <code>prototype</code>.<br>Example:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Circle</span>(<span class="params">centerX = <span class="number">0</span>, centerY = <span class="number">0</span>, radius = <span class="number">1</span>, color = <span class="string">'black'</span></span>)</span>&#123;</div><div class="line">    <span class="keyword">this</span>.x = centerX;</div><div class="line">    <span class="keyword">this</span>.y = centerY;</div><div class="line">    <span class="keyword">this</span>.radius = radius;</div><div class="line">    <span class="keyword">this</span>.color = color;</div><div class="line">&#125;</div><div class="line"></div><div class="line">Circle.prototype.area = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="built_in">Math</span>.PI * <span class="keyword">this</span>.radius * <span class="keyword">this</span>.radius;</div><div class="line">&#125;</div><div class="line"></div><div class="line">Circle.prototype.circumference = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="number">2</span> * <span class="built_in">Math</span>.PI * <span class="keyword">this</span>.radius;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> assert = <span class="built_in">require</span>(<span class="string">'assert'</span>);</div><div class="line"><span class="keyword">const</span> c = <span class="keyword">new</span> Circle(<span class="number">1</span>,<span class="number">5</span>);</div><div class="line">assert.deepEqual(c, &#123;<span class="attr">x</span>:<span class="number">1</span>, <span class="attr">y</span>:<span class="number">5</span>, <span class="attr">radius</span>:<span class="number">1</span>, <span class="attr">color</span>: <span class="string">'black'</span>&#125;);</div><div class="line">assert(c.area() === <span class="built_in">Math</span>.PI);</div><div class="line">assert(c.circumference() === <span class="number">2</span> * <span class="built_in">Math</span>.PI);</div><div class="line">assert(<span class="built_in">Object</span>.getPrototypeOf(c) === Circle.prototype);</div><div class="line">assert(c.constructor === Circle);</div><div class="line">assert(<span class="keyword">typeof</span>(c) === <span class="string">'object'</span>);</div></pre></td></tr></table></figure>
<p>There is a shorthand syntax for object. :</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Circle</span></span>&#123;</div><div class="line">    <span class="keyword">constructor</span>(centerX = 0, centerY = 0, radius = 1, color = 'black')&#123;</div><div class="line">        <span class="keyword">this</span>.x = centerX;</div><div class="line">        <span class="keyword">this</span>.y = centerY;</div><div class="line">        <span class="keyword">this</span>.radius = radius;</div><div class="line">        <span class="keyword">this</span>.color = color;</div><div class="line">    &#125;</div><div class="line">    area() &#123;<span class="keyword">return</span> <span class="built_in">Math</span>.PI * <span class="keyword">this</span>.radius * <span class="keyword">this</span>.radius;&#125;</div><div class="line">    circumference()&#123;<span class="keyword">return</span> <span class="number">2</span> * <span class="keyword">this</span>.radius * <span class="built_in">Math</span>.PI;&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> assert = <span class="built_in">require</span>(<span class="string">'assert'</span>);</div><div class="line"><span class="keyword">const</span> c = <span class="keyword">new</span> Circle(<span class="number">1</span>,<span class="number">5</span>);</div><div class="line">assert.deepEqual(c, &#123;<span class="attr">x</span>:<span class="number">1</span>, <span class="attr">y</span>:<span class="number">5</span>, <span class="attr">radius</span>:<span class="number">1</span>, <span class="attr">color</span>: <span class="string">'black'</span>&#125;);</div><div class="line">assert(c.area() === <span class="built_in">Math</span>.PI);</div><div class="line">assert(c.circumference() === <span class="number">2</span> * <span class="built_in">Math</span>.PI);</div><div class="line">assert(<span class="built_in">Object</span>.getPrototypeOf(c) === Circle.prototype);</div><div class="line">assert(c.constructor === Circle);</div><div class="line">assert(<span class="keyword">typeof</span>(c) === <span class="string">'object'</span>);</div><div class="line">assert(<span class="keyword">typeof</span>(Circle) === <span class="string">'function'</span>);</div></pre></td></tr></table></figure>
<p>Note the last line. It shows that the <code>class</code> word does not create a “class object”, it’s still a function!. The class construct is <em>syntactic sugar</em> , which just makes the standard form easier to read.</p>
<h3 id="7-scope"><a href="#7-Scope" class="headerlink" title="7. Scope"></a>7. Scope</h3><p><strong>Note</strong>: A <em>binding</em> is an association of a name with an entity. The <em>scope of a binding</em> is the region of code where a particular binding is active. JavaScript provide two ways we can introduce bindings: <code>Let</code> and <code>var</code>(<code>const</code> works here like <code>let</code>). <code>Var</code> can scoped to the innermost function, and bindings introduced with <code>let</code> are scoped to the nearest block:</p>
<p>Example:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> assert = <span class="built_in">require</span>(<span class="string">'assert'</span>);</div><div class="line"></div><div class="line"><span class="keyword">const</span> a = <span class="number">1</span>, b = <span class="number">2</span>;</div><div class="line"></div><div class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    assert(a === <span class="literal">undefined</span>); <span class="comment">// the local 'a' is in scope. JavaScript will put all declaration from 'var' to the head of function, and the assignment will not.</span></div><div class="line">    assert(b === <span class="number">2</span>); <span class="comment">// we see the outer 'b'</span></div><div class="line"></div><div class="line">    <span class="keyword">if</span>(<span class="literal">true</span>)&#123;</div><div class="line">        <span class="keyword">var</span> a = <span class="number">100</span>; <span class="comment">// To whole function</span></div><div class="line">        <span class="keyword">let</span> b = <span class="number">200</span>; <span class="comment">// only inside the block</span></div><div class="line">        <span class="keyword">const</span> c = <span class="number">300</span>; <span class="comment">//scoped only inside this block</span></div><div class="line">    &#125;</div><div class="line">    assert(a === <span class="number">100</span>); <span class="comment">// has benn initialized</span></div><div class="line">    assert(b === <span class="number">2</span>); <span class="comment">// outer, because local use let</span></div><div class="line">    assert.throws(<span class="function"><span class="params">()</span> =&gt;</span> c); <span class="comment">// there is no c</span></div><div class="line">&#125;)();</div></pre></td></tr></table></figure></p>
<h3 id="8-callback-and-promises"><a href="#8-Callback-and-promises" class="headerlink" title="8. Callback and promises"></a>8. Callback and promises</h3><p><strong>Note</strong>:</p>
<ul>
<li><strong>synchronous</strong>: when an application stops and waits for external operations to complete.</li>
<li><strong>asynchronous</strong>: if it can continue to do useful work until the long running operation finishes.</li>
</ul>
<p><strong>Note</strong>: An asynchronous architecture consists of code for <em>firing</em> and <em>responding</em> to events.</p>
<p>Example (If you want to run the script, write an html file with <code>&lt;script src=&quot;canvas.js&quot;&gt;&lt;/script&gt;</code> and use browser to open it):</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">window</span>.addEventListener(<span class="string">'load'</span>, e =&gt; &#123;</div><div class="line">    <span class="keyword">const</span> canvas = <span class="built_in">document</span>.createElement(<span class="string">'canvas'</span>);</div><div class="line">    <span class="keyword">const</span> ctx = canvas.getContext(<span class="string">'2d'</span>);</div><div class="line">    <span class="keyword">let</span> drawing = <span class="literal">false</span>;</div><div class="line">    canvas.style.border = <span class="string">'2px solid purple'</span>;</div><div class="line">    canvas.addEventListener(<span class="string">'mousedown'</span>, e =&gt; &#123;</div><div class="line">        drawing = <span class="literal">true</span>;</div><div class="line">        ctx.moveTo(e.clientX, e.clientY);</div><div class="line">    &#125;);</div><div class="line">    canvas.addEventListener(<span class="string">'mousemove'</span>, e =&gt; &#123;</div><div class="line">        <span class="keyword">if</span>(drawing)&#123;</div><div class="line">            ctx.lineTo(e.clientX,e.clientY);</div><div class="line">            ctx.stroke();</div><div class="line">        &#125;</div><div class="line">    &#125;);</div><div class="line">    <span class="keyword">const</span> stopDrawing = <span class="function"><span class="params">e</span> =&gt;</span> &#123;drawing = <span class="literal">false</span>&#125;;</div><div class="line">    canvas.addEventListener(<span class="string">'mouseup'</span>, stopDrawing);</div><div class="line">    canvas.addEventListener(<span class="string">'mouseout'</span>,stopDrawing);</div><div class="line">    <span class="built_in">document</span>.body.appendChild(canvas);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>The function passed as the second argument of <code>addEventListener</code> are called <strong>event handlers</strong> or <strong>callbacks</strong>, and the act of adding the listeners to the various objects known to the browser is called <strong>registering</strong> the callback.</p>
<p><strong>Note</strong>: As an alternative to writing asynchronous functions that take callbacks as parameters, you can write functions that return <strong>promises</strong> instead. A JavaScript promise is built from the <code>Promise</code> constructor of the standard library with a single argument, called the <strong>executor</strong>.<br>The executor has two parameters, <code>resolve</code> (success) and <code>reject</code> (failure). You can build up a series of asynchronous calls by chaining promises with <code>then</code> (to capture successful resolutions) or <code>catch</code> (to capture rejections).</p>
<p>Example:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">initialize</span>(<span class="params">configuration</span>)</span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'Initializing '</span> + configuration);</div><div class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</div><div class="line">        <span class="keyword">if</span>(!configuration)&#123;</div><div class="line">            reject(<span class="string">'Empty configuration'</span>);</div><div class="line">        &#125; <span class="keyword">else</span>&#123;</div><div class="line">            setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> resolve(<span class="string">'the initialized data'</span>), <span class="number">3000</span>);</div><div class="line">        &#125;</div><div class="line">    &#125;);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">process</span>(<span class="params">initialData</span>)</span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'Processing '</span> + initialData);</div><div class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</div><div class="line">        setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> resolve(<span class="string">'the processed data'</span>), <span class="number">3000</span>);</div><div class="line">    &#125;);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">report</span>(<span class="params">output</span>)</span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'Reporting '</span> + output);</div><div class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</div><div class="line">        setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> resolve(<span class="string">'the reported data'</span>), <span class="number">3000</span>);</div><div class="line">    &#125;);</div><div class="line">&#125;</div><div class="line"></div><div class="line">initialize(<span class="string">'the configuration data'</span>)</div><div class="line">.then(<span class="function"><span class="params">text</span> =&gt;</span> process(text))</div><div class="line">.then(<span class="function"><span class="params">value</span> =&gt;</span> report(value))</div><div class="line">.then(<span class="function"><span class="params">value</span> =&gt;</span> <span class="built_in">console</span>.log(<span class="string">'Success '</span> + value))</div><div class="line">.catch(<span class="function"><span class="params">reason</span> =&gt;</span> <span class="built_in">console</span>.log(<span class="string">'Error: '</span> + reason));</div></pre></td></tr></table></figure>
<p>Output:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">$ node promises.js </div><div class="line">Initializing the configuration data</div><div class="line">Processing the initialized data</div><div class="line">Reporting the processed data</div><div class="line">Success the reported data</div></pre></td></tr></table></figure>
<h3 id="9-exercise"><a href="#9-Exercise" class="headerlink" title="9. Exercise"></a>9. Exercise</h3><p>1.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">$ node </div><div class="line">&gt; <span class="string">"16"</span> == <span class="number">16</span></div><div class="line"><span class="literal">true</span></div><div class="line">&gt; <span class="string">"16"</span> == <span class="number">17</span></div><div class="line"><span class="literal">false</span></div><div class="line">&gt; <span class="string">"16"</span> === <span class="number">16</span></div><div class="line"><span class="literal">false</span></div><div class="line">&gt; <span class="number">16</span> == <span class="string">"0x10"</span></div><div class="line"><span class="literal">true</span></div><div class="line">&gt; <span class="string">"0x10"</span> == <span class="string">"16"</span></div><div class="line"><span class="literal">false</span></div></pre></td></tr></table></figure></p>
<p>Take care of the last example.</p>
<ol>
<li>Find out how to list all of the properties of the global object in your favorite JavaScript environment</li>
</ol>
<p>Answer: In chrome or some browsers, they provide the variable <code>window</code> to store all the information about the webpage. There are some ways to list the properties:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">Object</span>.keys(<span class="built_in">window</span>) <span class="comment">// or</span></div><div class="line"><span class="built_in">Object</span>.getOwnPropertyNames(<span class="built_in">window</span>).concat(</div><div class="line">  <span class="built_in">Object</span>.getOwnPropertyNames(<span class="built_in">Object</span>.getPrototypeOf(<span class="built_in">window</span>))</div><div class="line">)</div></pre></td></tr></table></figure>
<ol>
<li>Explain the second argument of the array methods: every, some, filter and map.</li>
</ol>
<p>Answer: This argument is an object which the callback’s <code>this</code> refers to.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> a = [<span class="number">3</span>, <span class="number">9</span>, <span class="number">6</span>];</div><div class="line">num = &#123;<span class="attr">s</span> : <span class="number">3</span>&#125;;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params">n</span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> n % <span class="keyword">this</span>.s === <span class="number">0</span>;</div><div class="line">&#125;</div><div class="line"><span class="built_in">console</span>.log(a.every(sum,num));</div></pre></td></tr></table></figure>
<p>output:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ node arrayEvery.js </div><div class="line"><span class="literal">true</span></div></pre></td></tr></table></figure>
<ol>
<li>What will happen when Each button is pressed for the following script?<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Rookie mistake using var: alerts 10 for every button.</span></div><div class="line"><span class="keyword">for</span> ( <span class="keyword">var</span> i = <span class="number">0</span> ; i &lt; <span class="number">10</span>; i++)&#123;</div><div class="line">    <span class="keyword">const</span> button = <span class="built_in">document</span>.createElement(<span class="string">"button"</span>);</div><div class="line">    button.innerHTML = i;</div><div class="line">    button.addEventListener(<span class="string">'click'</span>, e =&gt; &#123;alert(i);&#125;);</div><div class="line">    <span class="built_in">document</span>.body.appendChild(button);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ol>
<p>Answer: All the alert will be 10. Because by using var, the binding will work in the whole process. So when the callback is executed, the i has already been 10.<br>Just use let to replace the var, then it will work.</p>
<p>Next question is also an example:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> a = [], b = [];</div><div class="line"><span class="keyword">for</span> (<span class="keyword">var</span> x <span class="keyword">of</span> [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>])&#123;</div><div class="line">    a[x] = <span class="function"><span class="params">()</span> =&gt;</span> x;</div><div class="line">&#125;</div><div class="line"><span class="keyword">for</span>(<span class="keyword">let</span> y <span class="keyword">of</span> [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>])&#123;</div><div class="line">    b[y] = <span class="function"><span class="params">()</span> =&gt;</span> y;</div><div class="line">&#125;</div><div class="line"><span class="built_in">console</span>.log(a[<span class="number">1</span>]());</div><div class="line"><span class="built_in">console</span>.log(b[<span class="number">2</span>]());</div></pre></td></tr></table></figure>
<p>Output:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ node <span class="built_in">let</span>AndVarInFor.js </div><div class="line">3</div><div class="line">2</div></pre></td></tr></table></figure>
<p>5.Use <code>function*</code> and <code>yield</code> to rewrite the nextSquare program.</p>
<p>Answer:<br>In <code>Function*</code>, <code>yield</code> will return the value. It is another style to write a generator.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span>* <span class="title">nextS</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span> ; <span class="literal">true</span>; i++)&#123;</div><div class="line">        <span class="keyword">yield</span> i * i;</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="keyword">var</span> nextSquare = nextS();</div><div class="line"></div><div class="line"><span class="keyword">const</span> assert = <span class="built_in">require</span>(<span class="string">'assert'</span>);</div><div class="line">assert(nextSquare.next().value === <span class="number">0</span>);</div><div class="line">assert(nextSquare.next().value === <span class="number">1</span>);</div><div class="line">assert(nextSquare.next().value === <span class="number">4</span>);</div></pre></td></tr></table></figure>
<h2 id="chapter-2-coffeescript"><a href="#Chapter-2-CoffeeScript" class="headerlink" title="Chapter 2 CoffeeScript"></a>Chapter 2 CoffeeScript</h2><h3 id="1-background"><a href="#1-Background-1" class="headerlink" title="1. Background"></a>1. Background</h3><p>“Expose the good parts of JavaScript in a simple way.”</p>
<p>The golden rule of CoffeeScript: “It’s just JavaScript”.</p>
<p>It’s an <strong>Expression-oriented Language</strong>.</p>
<h3 id="2-hello-coffeescript"><a href="#2-Hello-CoffeeScript" class="headerlink" title="2. Hello, CoffeeScript"></a>2. Hello, CoffeeScript</h3><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> c <span class="keyword">in</span> [<span class="number">1.</span><span class="number">.40</span>]</div><div class="line">    <span class="keyword">for</span> b <span class="keyword">in</span> [<span class="number">1.</span>..c]</div><div class="line">        <span class="keyword">for</span> a <span class="keyword">in</span> [<span class="number">1.</span>..b]</div><div class="line">            <span class="built_in">console</span>.log <span class="string">"<span class="subst">#&#123;a&#125;</span>, <span class="subst">#&#123;b&#125;</span>, <span class="subst">#&#123;c&#125;</span>"</span> <span class="keyword">if</span> a * a + b * b <span class="keyword">is</span> c * c</div></pre></td></tr></table></figure>
<p>Output: </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">$ coffee Hello.coffee </div><div class="line">3, 4, 5</div><div class="line">6, 8, 10</div><div class="line">5, 12, 13</div><div class="line">...</div><div class="line">24, 32, 40</div></pre></td></tr></table></figure>
<p><strong>Note</strong>: </p>
<ul>
<li>CoffeeScript expresses program structure by indentation rather than braces.</li>
<li><code>for-in</code> loop iterates through the values of an array, which is the same as JavaScript’s <code>for-let-of</code>.</li>
<li>{..}, two dots give a range an <em>inclusive</em> upper bound; {…}, three dots give an <em>exclusive</em> range.</li>
<li>String interpolation <code>#{.}</code> works only inside strings delimited with double quotes “”, not single quotes.</li>
<li>The <code>if</code>-clause may follow an expression to be conditionally executed, useful when you wish to emphasize the action being taken rather than the condition.</li>
</ul>
<p>The same permutations generators as JavaScript:</p>
<figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="title">generatePermulations</span> = <span class="params">(a,n)</span> -&gt;</span></div><div class="line">    <span class="keyword">if</span> n <span class="keyword">is</span> <span class="number">0</span></div><div class="line">        <span class="built_in">console</span>.log a.join <span class="string">''</span></div><div class="line">    <span class="keyword">else</span></div><div class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> [<span class="number">0.</span>..n]</div><div class="line">            generatePermulations a, n<span class="number">-1</span></div><div class="line">            j = <span class="keyword">if</span> n % <span class="number">2</span> <span class="keyword">is</span> <span class="number">0</span> <span class="keyword">then</span> <span class="number">0</span> <span class="keyword">else</span> i</div><div class="line">            [a[j], a[n]] = [a[n], a[j]]</div><div class="line">        generatePermulations a, n<span class="number">-1</span></div><div class="line"></div><div class="line"><span class="keyword">if</span> process.argv.length <span class="keyword">isnt</span> <span class="number">3</span></div><div class="line">    <span class="built_in">console</span>.error <span class="string">'Exactly one argument is required'</span></div><div class="line">    process.exit <span class="number">1</span></div><div class="line">word = process.argv[<span class="number">2</span>]</div><div class="line">generatePermulations word.split(<span class="string">''</span>), word.length - <span class="number">1</span></div></pre></td></tr></table></figure>
<p>Output:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">$ coffee CommandLine.coffee asb</div><div class="line">asb</div><div class="line">sab</div><div class="line">bas</div><div class="line">abs</div><div class="line">sba</div><div class="line">bsa</div></pre></td></tr></table></figure>
<p><strong>Note</strong>:</p>
<ul>
<li>CoffeeScript can use <code>-&gt;</code> to write function. The difference between <code>-&gt;</code> and <code>=&gt;</code> is that when the function has zero parameters, <code>-&gt;{...}</code> is allowed, but <code>()</code> is necessary for <code>=&gt;</code>. However, the thin arrow will hijacks the value of <code>this</code>:</li>
</ul>
<p>Example:<br><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">person =</div><div class="line">    name: <span class="string">'Alice'</span></div><div class="line">    tryToSayHelloButFail: <span class="function"><span class="params">(delay)</span> -&gt;</span></div><div class="line">        setTimeout (<span class="function">-&gt;</span> <span class="built_in">console</span>.log <span class="string">"Hi from <span class="subst">#&#123;@name&#125;</span> :("</span>), delay</div><div class="line">    sayHello: <span class="function"><span class="params">(delay)</span> -&gt;</span></div><div class="line">        setTimeout (<span class="function"><span class="params">()</span> =&gt;</span> <span class="built_in">console</span>.log <span class="string">"Hi from <span class="subst">#&#123;@name&#125;</span> :)"</span>), delay</div><div class="line">    </div><div class="line">person.tryToSayHelloButFail <span class="number">1000</span></div><div class="line">person.sayHello <span class="number">1000</span></div></pre></td></tr></table></figure></p>
<p>Output:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ coffee ArrowDifference.coffee </div><div class="line">Hi from undefined :(</div><div class="line">Hi from Alice :)</div></pre></td></tr></table></figure></p>
<h3 id="3-the-basics"><a href="#3-The-basics" class="headerlink" title="3. The basics"></a>3. The basics</h3><p>Although CoffeeScript can be considered a dialect of JavaScript, the two languages ‘look’ rather different. JavaScript is a <code>curly-brace language</code>, but CoffeeScript uses indentation.<br>For Object:</p>
<figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">circle = </div><div class="line">	radius: <span class="number">3</span></div><div class="line">	center:</div><div class="line">		x: <span class="number">5</span></div><div class="line">		y: <span class="number">4</span></div><div class="line">	color: <span class="string">'green'</span></div><div class="line">	fillColor: <span class="string">'pink'</span></div><div class="line">	thickness: <span class="number">2</span></div><div class="line">	lineStyle: <span class="string">'dashed'</span></div></pre></td></tr></table></figure>
<p><strong>Note</strong>: Since the line breaks and the number of spaces matter in determining the structure of a script, we say CoffeeScript has a <em>significant whitespace</em> syntax, as opposed to a <em>free-form</em> syntax.</p>
<p><strong>Note</strong>: If you need to write a long string, <code>&quot;</code> or <code>&#39;</code> strings are allowed to span multiple lines; each line will be joined by a <code>single space</code>. For <code>&#39;&#39;&#39;</code> or <code>&quot;&quot;&quot;</code>, the line breaks will be kept.</p>
<p>Example:<br><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">example = </div><div class="line">    multi: <span class="string">"This is</span></div><div class="line">        really a one line</div><div class="line">        string"</div><div class="line">    block: <span class="string">"""</span></div><div class="line">        One</div><div class="line">        Two</div><div class="line">            TwoPointFive</div><div class="line">        Three</div><div class="line">        """</div><div class="line"></div><div class="line"><span class="built_in">console</span>.log example.multi</div><div class="line"><span class="built_in">console</span>.log example.block</div></pre></td></tr></table></figure></p>
<p>Output:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">$ coffee LongString.coffee </div><div class="line">This is really a one line string</div><div class="line">One</div><div class="line">Two</div><div class="line">    TwoPointFive</div><div class="line">Three</div></pre></td></tr></table></figure>
<p><strong>Note</strong>: CoffeeScript’s function can also be assigned to variables. Its array also has method <code>map</code>, <code>reduce</code>, <code>filter</code>:</p>
<figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="title">square</span> = <span class="params">(x)</span> -&gt;</span> x ** <span class="number">2</span></div><div class="line">squares = [<span class="number">1.</span><span class="number">.5</span>].map(square)</div><div class="line"><span class="function"><span class="title">result</span> = (<span class="params">(x)</span> -&gt;</span> x * <span class="number">5</span>) <span class="number">16</span></div><div class="line"></div><div class="line">assert = <span class="built_in">require</span> <span class="string">'assert'</span></div><div class="line">assert.deepStrictEqual(squares, [<span class="number">1</span>,<span class="number">4</span>,<span class="number">9</span>,<span class="number">16</span>,<span class="number">25</span>])</div><div class="line">assert result <span class="keyword">is</span> <span class="number">80</span></div></pre></td></tr></table></figure>
<p><strong>Note</strong>: CoffeeScript also has <code>this</code>. It has two shorthands in CoffeeScript: <code>@</code> for <code>this</code> and <code>@property</code> for <code>this.property</code></p>
<p>Example:<br><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">circle = </div><div class="line">    radius: <span class="number">10</span></div><div class="line">    area: <span class="function">-&gt;</span> Math.PI * @radius * @radius</div><div class="line">    circumference: <span class="function">-&gt;</span> <span class="number">2</span> * Math.PI * @radius</div><div class="line"></div><div class="line">assert = <span class="built_in">require</span> <span class="string">'assert'</span></div><div class="line">assert circle.area() <span class="keyword">is</span> <span class="number">100</span> * Math.PI</div><div class="line">assert circle.circumference() <span class="keyword">is</span> <span class="number">20</span> * Math.PI</div></pre></td></tr></table></figure></p>
<p><strong>Note</strong>: CoffeeScript also has object, class, prototype and constructor. In addition, it provides a slick way for initialization.</p>
<figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Circle</span></span></div><div class="line">    constructor: <span class="function"><span class="params">(@x=<span class="number">0</span>, @y=<span class="number">0</span>, @radius=<span class="number">1</span>, @color=<span class="string">'black'</span>)</span> -&gt;</span> </div><div class="line">    area: <span class="function">-&gt;</span> (@radius ** <span class="number">2</span>) * Math.PI</div><div class="line">    circumference: <span class="function">-&gt;</span> <span class="number">2</span> * Math.PI * @radius</div><div class="line">    expand: <span class="function"><span class="params">(scale)</span> -&gt;</span> @radius += scale</div><div class="line"></div><div class="line">circles = [(<span class="keyword">new</span> Circle <span class="number">3</span>,<span class="number">5</span>,<span class="number">10</span>, <span class="string">'blue'</span>), (<span class="keyword">new</span> Circle)]</div><div class="line"></div><div class="line">assert = <span class="built_in">require</span> <span class="string">'assert'</span></div><div class="line">assert circles[<span class="number">0</span>].color <span class="keyword">is</span> <span class="string">'black'</span></div><div class="line">assert circles[<span class="number">1</span>].circumference() <span class="keyword">is</span> <span class="number">2</span> * Math.PI</div></pre></td></tr></table></figure>
<p><strong>Note</strong>: The class syntax makes it convenient to express <code>IS-A</code> relationships. This works because the class extension mechanism makes <code>Animal.prototype</code> the prototype of <code>Horse.prototype</code>.</p>
<p>Example:</p>
<figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span></span></div><div class="line">    constructor: <span class="function"><span class="params">(@name)</span> -&gt;</span></div><div class="line">    speak: <span class="function">-&gt;</span> <span class="string">"<span class="subst">#&#123;@name&#125;</span> says <span class="subst">#&#123;@sound()&#125;</span>"</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cow</span> <span class="keyword">extends</span> <span class="title">Animal</span></span></div><div class="line">    sound: <span class="function">-&gt;</span> <span class="string">'moooo'</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Horse</span> <span class="keyword">extends</span> <span class="title">Animal</span></span></div><div class="line">    sound: <span class="function">-&gt;</span> <span class="string">'neigh'</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Zebra</span> <span class="keyword">extends</span> <span class="title">Horse</span></span></div><div class="line">    sound: <span class="function">-&gt;</span> <span class="string">'neighneigh'</span></div><div class="line"></div><div class="line">h = <span class="keyword">new</span> Horse <span class="string">'CJ'</span></div><div class="line">z = <span class="keyword">new</span> Zebra <span class="string">'JC'</span></div><div class="line"></div><div class="line"><span class="built_in">console</span>.log h.speak()</div><div class="line"><span class="built_in">console</span>.log z.speak()</div></pre></td></tr></table></figure>
<p>Output:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ coffee Animals.coffee </div><div class="line">CJ says neigh</div><div class="line">JC says neighneigh</div></pre></td></tr></table></figure></p>

    </div>

    

    

    <!-- Comments -->
    
    <div class="comments">
        
<div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>



    </div>
    

</div>
        </section>

    </div>
</div>

</div>

<!-- Footer -->
<div class="push"></div>

<footer class="footer-content">
    <div class="container">
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6 footer-about">
                <h2>About</h2>
                <p>
                    欢迎！
                </p>
            </div>
            
    <div class="col-xs-6 col-sm-6 col-md-3 col-lg-3 recent-posts">
        <h2>Recent Posts</h2>
        <ul>
            
            <li>
                <a class="footer-post" href="/2020/01/17/Django-Tips/">Django Tips</a>
            </li>
            
            <li>
                <a class="footer-post" href="/2020/01/07/leetcode-sliding-window/">leetcode-sliding window</a>
            </li>
            
            <li>
                <a class="footer-post" href="/2020/01/02/Divide-and-Conquer/">Divide and Conquer</a>
            </li>
            
            <li>
                <a class="footer-post" href="/2019/08/07/Deep-Learning-MIT-PRESS/">Deep Learning--MIT PRESS</a>
            </li>
            
        </ul>
    </div>



            
<div class="col-xs-6 col-sm-6 col-md-3 col-lg-3 footer-categories">
    <h2>Categories</h2>
    <ul>
        
        <li>
            <a class="footer-post" href="/categories/数据库/">数据库</a>
        </li>
        
        <li>
            <a class="footer-post" href="/categories/RISC/">RISC</a>
        </li>
        
        <li>
            <a class="footer-post" href="/categories/计算机视觉/">计算机视觉</a>
        </li>
        
        <li>
            <a class="footer-post" href="/categories/Blog/">Blog</a>
        </li>
        
    </ul>
</div>

        </div>
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <ul class="list-inline footer-social-icons">
                    
                    <li class="list-inline-item">
                        <a href="https://github.com/penguin858">
                            <span class="footer-icon-container">
                                <i class="fa fa-github"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    <li class="list-inline-item">
                        <a href="mailto:xuzeping858@gmail.com">
                            <span class="footer-icon-container">
                                <i class="fa fa-envelope-o"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                </ul>
            </div>
        </div>
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <div class="footer-copyright">
                    @Untitled.All right reserved | by Xu Zeping
                </div>
            </div>
        </div>
    </div>
</footer>

<!-- After footer scripts -->

<!-- jQuery -->
<script src="//code.jquery.com/jquery-2.1.4.min.js"></script>

<!-- Tween Max -->
<script src="//cdnjs.cloudflare.com/ajax/libs/gsap/1.18.5/TweenMax.min.js"></script>

<!-- Gallery -->
<script src="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.js" type="text/javascript" charset="utf-8"></script>

<!-- Custom JavaScript -->
<script src="/js/main.js"></script>

<!-- Disqus Comments -->

<script type="text/javascript">
    var disqus_shortname = 'Penguin858';

    (function(){
        var dsq = document.createElement('script');
        dsq.type = 'text/javascript';
        dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({"tex2jax":{"inlineMath":[["$","$"],["\\(","\\)"]],"skipTags":["script","noscript","style","textarea","pre","code"],"processEscapes":true},"TeX":{"equationNumbers":{"autoNumber":"AMS"}}});
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end -->



</body>

</html>